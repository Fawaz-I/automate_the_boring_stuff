<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="../assets/inventwithpython.com/automate3workbook/style.css" rel="stylesheet" type="text/css" /><title>Automate the Boring Stuff with Python Workbook: Projects and Exercises to Sharpen Your Python Skills</title></head><body><style>.atbs-nav{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between;margin:1rem 0;padding:.7rem .8rem;border:1px solid #cfd8dc;border-radius:10px;background:#f6fbfd;font:14px/1.35 system-ui,-apple-system,sans-serif;}.atbs-nav-center{color:#455a64;font-weight:600;}.atbs-nav-link{text-decoration:none;color:#0b5b6b;background:#e6f3f7;border:1px solid #c7dfe7;border-radius:7px;padding:.42rem .55rem;display:inline-block;}.atbs-nav-link:hover{background:#d9edf3;}.atbs-nav-disabled{opacity:.55;cursor:not-allowed;}</style><nav class='atbs-nav' aria-label='Chapter pagination'><a class='atbs-nav-link' href='../book/chapter5.html' aria-label='Previous chapter'>&larr; Book Chapter 5</a><span class='atbs-nav-center'><a class='atbs-nav-link' href='../index.html'>Contents</a> Workbook Chapter 5</span><a class='atbs-nav-link' href='../book/chapter6.html' aria-label='Next chapter'>Book Chapter 6 &rarr;</a></nav>






<div class="calibre" id="calibre_link-13">
<section type="chapter" role="doc-chapter" aria-labelledby="ch05">
<h1 id="calibre_link-2619" type="title" class="h1ch"><span role="doc-pagebreak" id="calibre_link-2620" aria-label="33" class="calibre1"></span><span class="big">5</span><span class="break1"></span>DEBUGGING</h1>
<p class="noindent-c">No matter how many years of experience you have, you’ll sometimes write code containing bugs. So, it’s valuable to learn about the debugger and bug prevention techniques. The following questions test your ability to write code that handles errors through raising exceptions, making <span class="literal">assert</span> statements, and creating event logs with the <span class="literal">logging</span> module.</p>
<aside type="sidebar" class="sidebar" aria-labelledby="side5" role="doc-example">
<section>
<h2 type="title" class="stitle" id="calibre_link-2621"><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000000.jpg" alt="A simple drawing of a light bulb." /> LEARNING OBJECTIVES</h2>
<ul class="b-bullet">
<li class="bull">Know how to make assertions with <span class="literal">assert</span> statements.</li>
<li class="bull">Understand the difference between exceptions and assertions and the roles they play.</li>
<li class="bull">Use the <span class="literal">logging</span> module to create a trail of clues regarding what your program is doing, and in what order.</li>
<li class="bull">Be able to run your programs under the debugger to identify what is happening behind the scenes.</li>
<li class="bull">Use debugger features such as breakpoints, and inspect the values stored in variables.</li>
</ul>
</section>
</aside>
<section>
<h2 id="calibre_link-80" type="title" class="h"><span role="doc-pagebreak" id="calibre_link-2622" aria-label="34" class="calibre1"></span><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000005.jpg" alt="A grey circle with a white question mark at the center" /> Practice Questions</h2>
<p class="noindent">The following questions test your ability to work with assertions, exceptions, logging, and the debugger.</p>
<section>
<h3 id="calibre_link-81" type="title" class="h1">Raising Exceptions</h3>
<p class="noindent">You’ve already practiced handling Python’s exceptions with <span class="literal">try</span> and <span class="literal">except</span> statements so that your program can recover from exceptions you anticipated. But you can also raise your own exceptions. Raising an exception is a way of saying, “Stop running this code and move the program execution to the <span class="literal">except</span> statement.” We raise exceptions with a <span class="literal">raise</span> statement. Answer the following questions about exceptions, the <span class="literal">try</span> and <span class="literal">except</span> statements, and <span class="literal">raise</span> statements.</p>
<ol class="order">
<li class="calibre15"><p class="number"><a href="#calibre_link-523" id="calibre_link-1658" class="calibre6">1</a>. What happens if you run the following program and press <span class="smallcaps">enter</span> instead of entering a name?</p>
<pre class="calibre16">print('Enter your name:')
name = input()
if name == '':
&nbsp;&nbsp;&nbsp;&nbsp;raise Exception('You did not enter a name.')
else:
&nbsp;&nbsp;&nbsp;&nbsp;print('Hello,', name)</pre></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-524" id="calibre_link-1659" class="calibre6">2</a>. Write the code that raises an <span class="literal">Exception</span> error with the error message <span class="literal">'An error happened. This error message is vague and unhelpful.'</span></p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-525" id="calibre_link-1660" class="calibre6">3</a>. True or false: A <span class="literal">raise</span> statement must be inside a <span class="literal">try</span> block.</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-526" id="calibre_link-1661" class="calibre6">4</a>. What happens if you run the following program and press <span class="smallcaps">enter</span> instead of entering a name?</p>
<pre class="calibre16">def get_name():
&nbsp;&nbsp;&nbsp;&nbsp;print('Enter your name:')
&nbsp;&nbsp;&nbsp;&nbsp;name = input()
&nbsp;&nbsp;&nbsp;&nbsp;if name == '':
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise Exception('You did not enter a name.')

&nbsp;&nbsp;&nbsp;&nbsp;return name

try:
&nbsp;&nbsp;&nbsp;&nbsp;name = get_name()
except:
&nbsp;&nbsp;&nbsp;&nbsp;name = 'Guido'

print('Hello,', name)</pre></li>
</ol>
</section>
<section>
<h3 id="calibre_link-82" type="title" class="h1">Assertions</h3>
<p class="noindent">An assertion is a sanity check that makes sure your code isn’t doing something obviously wrong. We make assertions with an <span class="literal">assert</span> statement. If the condition in an <span class="literal">assert</span> statement is <span class="literal">False</span>, Python raises the <span class="literal">AssertionError</span> exception. The following questions test your knowledge of <span class="literal">assert</span> statements and how to use assertions to detect problems.</p>
<ol class="order">
<li class="calibre15"><p class="number"><a href="#calibre_link-527" id="calibre_link-1662" class="calibre6">5</a>. <span role="doc-pagebreak" id="calibre_link-2623" aria-label="35"></span>“While exceptions are for user errors, assertions are for ____ errors.”</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-528" id="calibre_link-1663" class="calibre6">6</a>. Why is failing fast a good thing?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-529" id="calibre_link-1664" class="calibre6">7</a>. Which command line argument to the Python interpreter suppresses assertion checks when running a program?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-530" id="calibre_link-1665" class="calibre6">8</a>. What does <span class="literal">assert False</span> do?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-83" type="title" class="h1">Logging</h3>
<p class="noindent">Logging is a great way to understand what’s happening in your program, and in what order. Python’s <span class="literal">logging</span> module makes it easy to create a record of custom messages that you write.</p>
<ol class="order">
<li class="calibre15"><p class="number"><a href="#calibre_link-531" id="calibre_link-1666" class="calibre6">9</a>. Alice writes a program with several <span class="literal">print()</span> calls for debugging information instead of using the <span class="literal">logging</span> module. After she’s done programming, she starts removing these <span class="literal">print()</span> calls. What are two possible mistakes she could make while removing them?</p></li>
</ol>
<p class="indent">For each of the following events, decide what logging level to use for the corresponding log message. (These can be subjective and may have multiple acceptable answers.)</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-532" id="calibre_link-1667" class="calibre6">10</a>. An error causes a failure that makes the program crash with no chance of recovery.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-533" id="calibre_link-1668" class="calibre6">11</a>. A particular function in your program, <span class="literal">calculate_my_result()</span>, is called.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-534" id="calibre_link-1669" class="calibre6">12</a>. The program logs the value of a particular variable.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-535" id="calibre_link-1670" class="calibre6">13</a>. The user requests that the program open a file, but the file doesn’t exist.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-536" id="calibre_link-1671" class="calibre6">14</a>. The program detects that a calculation is wrong but is able to continue running.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-537" id="calibre_link-1672" class="calibre6">15</a>. The program starts running and needs to record the time and date at which it started.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-538" id="calibre_link-1673" class="calibre6">16</a>. The program keeps track of how many times a <span class="literal">while</span> loop had looped before exiting.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-539" id="calibre_link-1674" class="calibre6">17</a>. The program logs the string the user entered for an <span class="literal">input()</span> call.</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-84" type="title" class="h1">Mu’s Debugger</h3>
<p class="noindent">The debugger is a tool that can run a single line of code and then wait for you to tell it to continue. By running your program “under the debugger” like this, you can take as much time as you want to examine the values in the variables at any given point during the program’s lifetime, making it a valuable tool for tracking down bugs. It’s also more efficient than debugging your program by sprinkling <span class="literal">print()</span> calls throughout your code and rerunning it over and over.</p>
<p class="indent"><span role="doc-pagebreak" id="calibre_link-2624" aria-label="36"></span>The following questions concern the debugger for the Mu code editor used in <i class="calibre5">Automate the Boring Stuff with Python</i>. If you use a different debugger, try answering these questions for it instead.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-540" id="calibre_link-1675" class="calibre6">18</a>. What do you do if you want the program to run at normal speed, then pause and start the debugger once the execution reaches a particular line of code?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-541" id="calibre_link-1676" class="calibre6">19</a>. If the debugger is currently paused on a line of code within a function and you want it to run the rest of the code in the function at normal speed, then pause once the execution has returned from the function, which debugger button should you press?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-542" id="calibre_link-1677" class="calibre6">20</a>. Which button should you press if the debugger is currently paused on a line of code and you want it to resume running at normal speed?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-543" id="calibre_link-1678" class="calibre6">21</a>. If the debugger is currently paused on a line of code, how can you immediately terminate the program?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-544" id="calibre_link-1679" class="calibre6">22</a>. If the debugger is currently paused on a line of code that is a function call, which debugger button would cause the debugger to pause on the first line in that function?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-545" id="calibre_link-1680" class="calibre6">23</a>. If the debugger is currently paused on a line of code that is a function call, and you want to run all the code inside that function at normal speed, then pause again when the execution has returned from the function, which debugger button should you press?</p></li>
</ol>
</section>
</section>
<section>
<h2 id="calibre_link-85" type="title" class="h"><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000002.jpg" alt="A simple drawing of a sharpened pencil." /> Practice Projects</h2>
<p class="noindent">For this chapter’s projects, you’ll debug several programs and then write some intentionally buggy code of your own to produce different error messages.</p>
<section>
<h3 id="calibre_link-86" type="title" class="h1">Buggy Grade-Average Calculator</h3>
<p class="noindent">Copy the following program into your editor or download it from <i class="calibre5"><a href="https://autbor.com/buggygradeaverage.py" class="calibre6">https://autbor.com/buggygradeaverage.py</a></i>. This program lets the user enter any number of grades until the user enters <span class="literal">done</span>. It then displays the average of the entered grades.</p>
<pre class="pre">def calculate_grade_average(grade_sum, number_of_grades):
&nbsp;&nbsp;&nbsp;&nbsp;grade_average = int(grade_sum / number_of_grades)
&nbsp;&nbsp;&nbsp;&nbsp;return grade_average

counter = 0
total = 0
while True:
&nbsp;&nbsp;&nbsp;&nbsp;print('Enter a grade, or "done" if done entering grades:')
&nbsp;&nbsp;&nbsp;&nbsp;grade = input()
&nbsp;&nbsp;&nbsp;&nbsp;if grade == 'done':
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break
&nbsp;&nbsp;&nbsp;&nbsp;counter = counter + 1
&nbsp;&nbsp;&nbsp;&nbsp;total = total + int(grade)

avg = calculate_grade_average(counter, total)
print('The grade average is:', avg)</pre>
<p class="indent"><span role="doc-pagebreak" id="calibre_link-2625" aria-label="37"></span>When you run the program and enter <span class="literal">100</span> and <span class="literal">50</span>, however, it reports the average as <span class="literal">0</span> instead of <span class="literal">75</span>:</p>
<pre class="pre">Enter a grade, or "done" if done entering grades:
<span class="codestrong">100</span>
Enter a grade, or "done" if done entering grades:
<span class="codestrong">50</span>
Enter a grade, or "done" if done entering grades:
<span class="codestrong">done</span>
The grade average is: 0</pre>
<p class="indent">Run this program under a debugger to find out why it doesn’t work, then fix the bug. (Note that if the user enters a response other than <span class="literal">done</span> or a number, the program crashes; ignore this bug for now.)</p>
</section>
<section>
<h3 id="calibre_link-87" type="title" class="h1">Zero Division Error</h3>
<p class="noindent">Take a look at your corrected version of the previous grade-average program. If you run this program and immediately enter <span class="literal">done</span> without entering any grades, the program crashes with a <span class="literal">ZeroDivisionError: division by zero</span> error.</p>
<p class="indent">Use the debugger to find out why this happens. Add code to the <span class="literal">calculate</span><span class="literal">_grade_average()</span> function so that it returns the integer <span class="literal">0</span> when the user hasn’t entered any grades, instead of crashing.</p>
</section>
<section>
<h3 id="calibre_link-88" type="title" class="h1">Leap Year Calculator</h3>
<p class="noindent">Copy the following program into your editor or download it from <i class="calibre5"><a href="https://autbor.com/buggyLeapYear.py" class="calibre6">https://autbor.com/buggyLeapYear.py</a></i>. This program has an <span class="literal">is_leap_year()</span> function that takes an integer year, then returns <span class="literal">True</span> if it’s a leap year and <span class="literal">False</span> if it isn’t.</p>
<pre class="pre">def is_leap_year(year):
&nbsp;&nbsp;&nbsp;&nbsp;if year % 4 == 0:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if year % 100 == 0:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if year % 400 == 0:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True
&nbsp;&nbsp;&nbsp;&nbsp;return False

while True:
&nbsp;&nbsp;&nbsp;&nbsp;print('Enter a year or "done":')
&nbsp;&nbsp;&nbsp;&nbsp;response = input()
&nbsp;&nbsp;&nbsp;&nbsp;if response == 'done':
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break
&nbsp;&nbsp;&nbsp;&nbsp;print('Is leap year:', is_leap_year(int(response)))</pre>
<p class="indent">For example, if you run this program, the output will look like this:</p>
<pre class="pre">Enter a year or "done":
<span class="codestrong">2000</span>
Is leap year: True
Enter a year or "done":
<span class="codestrong">2001</span>
Is leap year: False
<span role="doc-pagebreak" id="calibre_link-2626" aria-label="38"></span>Enter a year or "done":
<span class="codestrong">2004</span>
Is leap year: True
Enter a year or "done":
<span class="codestrong">2100</span>
Is leap year: True
Enter a year or "done":
<span class="codestrong">done</span></pre>
<p class="indent">A year is a leap year if it is evenly divisible by <span class="literal">4</span>. An exception to this rule occurs if the year is also evenly divisible by <span class="literal">100</span>, in which case it is not a leap year. There is an exception to that exception too: If the year is also evenly divisible by <span class="literal">400</span>, it is a leap year.</p>
<p class="indent">The year 2100 should not be a leap year, but the function call <span class="literal">is_leap</span><span class="literal">_year(2100)</span> incorrectly returns <span class="literal">True</span>. Run this code under a debugger so that you can see where exactly the bug is, and then write the corrected <span class="literal">is_leap_year()</span> function.</p>
</section>
<section>
<h3 id="calibre_link-89" type="title" class="h1">Writing Buggy Code on Purpose</h3>
<p class="noindent">Write several short programs that produce the given error message in the following list. If you’re unfamiliar with the error message, search for it on the internet to find bug reports from others who have encountered it. The filename is a hint for writing the program.</p>
<ul class="bullet">
<li class="bull">A program named <i class="calibre5">nameError.py</i> that produces the error message <span class="literal">NameError: name 'spam' is not defined</span></li>
<li class="bull">A program named <i class="calibre5">badInt.py</i> that produces the error message <span class="literal">ValueError: invalid literal for int() with base 10: 'five'</span></li>
<li class="bull">A program named <i class="calibre5">badEquals.py</i> that produces the error message <span class="literal">SyntaxError: invalid syntax. Maybe you meant '==' or ':=' instead of '='?</span></li>
<li class="bull">A program named <i class="calibre5">badString.py</i> that produces the error message <span class="literal">SyntaxError: unterminated string literal (detected at line <i class="calibre5">x</i>)</span> (where <span class="literal"><i class="calibre5">x</i></span> can be any number)</li>
<li class="bull">A program named <i class="calibre5">badBool.py</i> that produces the error message <span class="literal">NameError: name 'true' is not defined. Did you mean: 'True'?</span></li>
<li class="bull">A program named <i class="calibre5">missingIfBlock.py</i> that produces the error message <span class="literal">IndentationError: expected an indented block after 'if' statement on line</span> <span class="literal"><i class="calibre5">x</i></span> (where <span class="literal"><i class="calibre5">x</i></span> can be any number)</li>
<li class="bull">A program named <i class="calibre5">stringPlusInt.py</i> that produces the error message <span class="literal">TypeError: can only concatenate str (not "int") to str</span></li>
<li class="bull">A program named <i class="calibre5">intPlusString.py</i> that produces the error message <span class="literal">TypeError: unsupported operand type(s) for +: 'int' and 'str'</span></li>
</ul>
</section>
</section>
</section>
</div>







<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"8bd877e77db3400e83e36e899a2ab1fd","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<style>.atbs-nav{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between;margin:1rem 0;padding:.7rem .8rem;border:1px solid #cfd8dc;border-radius:10px;background:#f6fbfd;font:14px/1.35 system-ui,-apple-system,sans-serif;}.atbs-nav-center{color:#455a64;font-weight:600;}.atbs-nav-link{text-decoration:none;color:#0b5b6b;background:#e6f3f7;border:1px solid #c7dfe7;border-radius:7px;padding:.42rem .55rem;display:inline-block;}.atbs-nav-link:hover{background:#d9edf3;}.atbs-nav-disabled{opacity:.55;cursor:not-allowed;}</style><nav class='atbs-nav' aria-label='Chapter pagination'><a class='atbs-nav-link' href='../book/chapter5.html' aria-label='Previous chapter'>&larr; Book Chapter 5</a><span class='atbs-nav-center'><a class='atbs-nav-link' href='../index.html'>Contents</a> Workbook Chapter 5</span><a class='atbs-nav-link' href='../book/chapter6.html' aria-label='Next chapter'>Book Chapter 6 &rarr;</a></nav></body></html>