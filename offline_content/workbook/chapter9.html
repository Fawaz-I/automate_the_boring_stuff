<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="../assets/inventwithpython.com/automate3workbook/style.css" rel="stylesheet" type="text/css" /><title>Automate the Boring Stuff with Python Workbook: Projects and Exercises to Sharpen Your Python Skills</title></head><body><style>.atbs-nav{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between;margin:1rem 0;padding:.7rem .8rem;border:1px solid #cfd8dc;border-radius:10px;background:#f6fbfd;font:14px/1.35 system-ui,-apple-system,sans-serif;}.atbs-nav-center{color:#455a64;font-weight:600;}.atbs-nav-link{text-decoration:none;color:#0b5b6b;background:#e6f3f7;border:1px solid #c7dfe7;border-radius:7px;padding:.42rem .55rem;display:inline-block;}.atbs-nav-link:hover{background:#d9edf3;}.atbs-nav-disabled{opacity:.55;cursor:not-allowed;}</style><nav class='atbs-nav' aria-label='Chapter pagination'><a class='atbs-nav-link' href='../book/chapter9.html' aria-label='Previous chapter'>&larr; Book Chapter 9</a><span class='atbs-nav-center'><a class='atbs-nav-link' href='../index.html'>Contents</a> Workbook Chapter 9</span><a class='atbs-nav-link' href='../book/chapter10.html' aria-label='Next chapter'>Book Chapter 10 &rarr;</a></nav>







<div class="calibre" id="calibre_link-17">
<section type="chapter" role="doc-chapter" aria-labelledby="ch09">
<h1 id="calibre_link-2655" type="title" class="h1ch"><span role="doc-pagebreak" id="calibre_link-2656" aria-label="61" class="calibre1"></span><span class="big">9</span><span class="break1"></span>TEXT PATTERN MATCHING WITH REGULAR EXPRESSIONS</h1>
<p class="noindent-c">Most programming languages implement regular expressions, or <i class="calibre5">regexes</i>, because they make it easy to locate particular patterns of text. An understanding of Python’s regexes can prepare you for learning regexes in any programming language and in many word processor applications as well, so digging into this topic is a worthy investment.</p>
<aside type="sidebar" class="sidebar" aria-labelledby="side9" role="doc-example">
<section>
<h2 type="title" class="stitle" id="calibre_link-2657"><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000000.jpg" alt="A simple drawing of a light bulb." /> LEARNING OBJECTIVES</h2>
<ul class="b-bullet">
<li class="bull">Master the basics of regular expression syntax in the Python programming language.</li>
<li class="bull">Know how to use qualifiers to describe what characters to match.</li>
<li class="bull">Know how to use quantifiers to describe the number of characters to match.</li>
<li class="bull">Be able to resolve the ambiguity between greedy and non-greedy matching using the question mark (<span class="literal">?</span>) syntax.</li>
<li class="bull">Understand how to pass flags such as <span class="literal">re.IGNORECASE</span> to the <span class="literal">re.compile()</span> function to do case-insensitive matching.</li>
<li class="bull"><span role="doc-pagebreak" id="calibre_link-2658" aria-label="62"></span>Be able to use verbose mode to write larger regexes across multiple lines.</li>
<li class="bull">Know how to write human-readable regular expressions using the Humre module.</li>
</ul>
</section>
</aside>
<section>
<h2 id="calibre_link-119" type="title" class="h"><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000005.jpg" alt="A grey circle with a white question mark at the center" /> Practice Questions</h2>
<p class="noindent">These questions test your understanding of the particular style of regex that Python uses in its <span class="literal">re</span> module.</p>
<section>
<h3 id="calibre_link-120" type="title" class="h1">The Syntax of Regular Expressions</h3>
<p class="noindent">Regular expressions allow you to specify a pattern of text to search for. For example, the characters <span class="literal">\d</span> in a regex stand for a decimal numeral between 0 and 9, and adding a numeral, such as 3, in curly brackets (<span class="literal">{3}</span>) after a pattern is like saying, “Match this pattern three times.” Further, parentheses can create groups in the regex string that let you grab different portions of the matched text.</p>
<ol class="order">
<li class="calibre15"><p class="number"><a href="#calibre_link-701" id="calibre_link-1835" class="calibre6">1</a>. What is the difference between the <span class="literal">re.compile()</span> function and the <span class="literal">search()</span> method?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-702" id="calibre_link-1836" class="calibre6">2</a>. How many groups are in the regex <span class="literal">(\\d{3})-(\\d{3})-(\\d{4})</span>?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-703" id="calibre_link-1837" class="calibre6">3</a>. What about in the regex <span class="literal">(\\d{3})-(\\d{3}-(\\d{4}))</span>?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-704" id="calibre_link-1838" class="calibre6">4</a>. Rewrite this regex using a raw string: <span class="literal">\\(\\d{3}\\)-(\\d{3})-(\\d{4})</span>.</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-705" id="calibre_link-1839" class="calibre6">5</a>. List four characters that have special meaning in regex strings and must be escaped if you want to literally match them.</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-706" id="calibre_link-1840" class="calibre6">6</a>. Write a regex that uses the alternation syntax to match the word <span class="literal">clutter</span>, <span class="literal">clue</span>, or <span class="literal">club</span>.</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-707" id="calibre_link-1841" class="calibre6">7</a>. Which of the following strings does the regex <span class="literal">(A|B)(A|B)</span> match: <span class="literal">A</span>, <span class="literal">B</span>, <span class="literal">AA</span>, <span class="literal">AB</span>, <span class="literal">BA</span>, or <span class="literal">BB</span>?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-708" id="calibre_link-1842" class="calibre6">8</a>. What is the main difference between the <span class="literal">search()</span> method and the <span class="literal">findall()</span> method?</p></li>
<li class="calibre15"><p class="number"><a href="#calibre_link-709" id="calibre_link-1843" class="calibre6">9</a>. If <span class="literal">findall()</span> were called on a <span class="literal">Pattern</span> object of the regex <span class="literal">r'\d{3}-\d{3}-\d{4}'</span>, which could it possibly return: <span class="literal">['415-555-9999']</span> or <span class="literal">[('415', '555', '9999')]</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-710" id="calibre_link-1844" class="calibre6">10</a>. If <span class="literal">findall()</span> were called on a <span class="literal">Pattern</span> object of the regex <span class="literal">r'(\d{3})-(\d{3})-(\d{4})'</span>, which could it possibly return: <span class="literal">['415-555-9999']</span> or <span class="literal">[('415', '555', '9999')]</span>?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-121" type="title" class="h1"><span role="doc-pagebreak" id="calibre_link-2659" aria-label="63" class="calibre1"></span>Qualifier Syntax: What Characters to Match</h3>
<p class="noindent">The qualifiers of a regular expression dictate what characters you’re trying to match. You can specify these using character classes, shorthand character classes, and characters with special meaning in regular expressions. Test your understanding of qualifier syntax.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-711" id="calibre_link-1845" class="calibre6">11</a>. Write a regex with a character class that is equivalent to <span class="literal">a|b|c|d</span>.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-712" id="calibre_link-1846" class="calibre6">12</a>. Write a regex that uses shorthand character classes to match strings like <span class="literal">a1z</span>, <span class="literal">B3x</span>, and <span class="literal">L0L</span>.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-713" id="calibre_link-1847" class="calibre6">13</a>. Will the regex <span class="literal">[a-z]</span> match the string <span class="literal">é</span> (an <i class="calibre5">e</i> with an accent mark)?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-714" id="calibre_link-1848" class="calibre6">14</a>. Will the regex <span class="literal">\w</span> match the string <span class="literal">é</span> (an <i class="calibre5">e</i> with an accent mark)?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-715" id="calibre_link-1849" class="calibre6">15</a>. Will the regex <span class="literal">\W</span> match the string <span class="literal">é</span> (an <i class="calibre5">e</i> with an accent mark)?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-716" id="calibre_link-1850" class="calibre6">16</a>. Will the regex <span class="literal">[A-Z]</span> match the string <span class="literal">z</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-717" id="calibre_link-1851" class="calibre6">17</a>. Will the regex <span class="literal">.</span> match the string <span class="literal">é</span> (an <i class="calibre5">e</i> with an accent mark)?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-718" id="calibre_link-1852" class="calibre6">18</a>. Will the regex <span class="literal">r'\.'</span> match the string <span class="literal">é</span>(an <i class="calibre5">e</i> with an accent mark)?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-719" id="calibre_link-1853" class="calibre6">19</a>. Name two shorthand character classes that will match the string <span class="literal">5</span>.</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-122" type="title" class="h1">Quantifier Syntax: How Many Qualifiers to Match</h3>
<p class="noindent">In a regular expression string, quantifiers follow qualifier characters to dictate how many of them to match. For example, a <span class="literal">{3}</span> might follow <span class="literal">\d</span> to match exactly three digits. Answer the following questions about quantifier syntax.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-720" id="calibre_link-1854" class="calibre6">20</a>. Which of the following strings does the regex <span class="literal">'(A|B?)(A|B)?'</span> match: <span class="literal">A</span>, <span class="literal">B</span>, <span class="literal">AA</span>, <span class="literal">AB</span>, <span class="literal">BA</span>, or <span class="literal">BB</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-721" id="calibre_link-1855" class="calibre6">21</a>. Write a regex that matches both <span class="literal">Cheese?</span> and <span class="literal">Cheese</span>.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-722" id="calibre_link-1856" class="calibre6">22</a>. What string will the regexes <span class="literal">X?</span> and <span class="literal">X*</span> match that <span class="literal">X+</span> won’t match?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-723" id="calibre_link-1857" class="calibre6">23</a>. Write a regex that matches the same thing as the regex <span class="literal">X{1,}</span>.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-724" id="calibre_link-1858" class="calibre6">24</a>. Do the regexes <span class="literal">X{3,}</span> and <span class="literal">XX{2,}</span> and <span class="literal">XXX+</span> match the same strings?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-725" id="calibre_link-1859" class="calibre6">25</a>. What is the difference between the regexes <span class="literal">Ha{3}</span> and <span class="literal">(Ha){3}</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-726" id="calibre_link-1860" class="calibre6">26</a>. Write a regex that matches a dot-com website address. The address should begin with <i class="calibre5">https://</i>, may optionally have <i class="calibre5">www.</i>, should include at least one letter or number for the website name, and should end with <i class="calibre5">.com</i>.</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-727" id="calibre_link-1861" class="calibre6">27</a>. In the XKCD comic at <i class="calibre5"><a href="https://xkcd.com/1105/" class="calibre6">https://xkcd.com/1105/</a></i>, the main character has a license plate made up of a jumble of 1s and capital letter <i class="calibre5">I</i>s: 1I1-III1. Write a regular expression that matches all possible license plates in this style. Such a license plate consists of three 1s or <i class="calibre5">I</i>s, a dash, then four more 1s or <i class="calibre5">I</i>s.</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-123" type="title" class="h1"><span role="doc-pagebreak" id="calibre_link-2660" aria-label="64" class="calibre1"></span>Greedy and Non-Greedy Matching</h3>
<p class="noindent">In ambiguous situations, a greedy match will match the longest string possible. A non-greedy match (also called a <i class="calibre5">lazy match</i>) will match the shortest string possible. Answer the following questions about greedy and non-greedy matching.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-728" id="calibre_link-1862" class="calibre6">28</a>. Between greedy and non-greedy matching, which is the default behavior of Python regular expressions?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-729" id="calibre_link-1863" class="calibre6">29</a>. Is greedy/non-greedy matching a feature of qualifier syntax or quantifier syntax?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-730" id="calibre_link-1864" class="calibre6">30</a>. What does the regex <span class="literal">.*</span> mean?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-731" id="calibre_link-1865" class="calibre6">31</a>. What does the regex <span class="literal">.*?</span> mean?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-732" id="calibre_link-1866" class="calibre6">32</a>. What is the difference between the <span class="literal">Pattern</span> object returned by <span class="literal">re.compile('.*')</span> and the one returned by <span class="literal">re.compile('.*', re.DOTALL)</span>?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-124" type="title" class="h1">Matching at the Start and End of a String</h3>
<p class="noindent">You can use the caret symbol (<span class="literal">^</span>) at the start of a regex to indicate that a match must occur at the beginning of the searched text. Likewise, you can put a dollar sign (<span class="literal">$</span>) at the end of the regex to indicate that the string must end with this regex pattern. Lastly, you can use <span class="literal">^</span> and <span class="literal">$</span> together to indicate that the entire string must match the regex&mdash;that is, it’s not enough for a match to be made on some subset of the string. Python’s regex syntax also includes matching on word boundaries (separated by whitespace) with <span class="literal">\b</span>.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-733" id="calibre_link-1867" class="calibre6">33</a>. Which regex matches the entire string <span class="literal">spam</span>: <span class="literal">spam</span>, <span class="literal">$spam^</span>, or <span class="literal">^spam$</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-734" id="calibre_link-1868" class="calibre6">34</a>. While <span class="literal">\b</span> matches a word boundary, what does <span class="literal">\B</span> match?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-125" type="title" class="h1">Case-Insensitive Matching</h3>
<p class="noindent">Normally, regular expressions match text with the exact casing you specify. To make your regex case insensitive, you can pass <span class="literal">re.IGNORECASE</span> or <span class="literal">re.I</span> as a second argument to <span class="literal">re.compile()</span>. Answer the following questions about case-insensitive matching.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-735" id="calibre_link-1869" class="calibre6">35</a>. Does Python’s <span class="literal">re</span> module do case-insensitive matching by default?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-736" id="calibre_link-1870" class="calibre6">36</a>. What are the two arguments you can pass to <span class="literal">re.compile()</span> that enable case-insensitive matching?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-737" id="calibre_link-1871" class="calibre6">37</a>. Will a case-insensitive search with the regex <span class="literal">^[A-Z]$</span> match the string <span class="literal">Sinéad</span>?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-738" id="calibre_link-1872" class="calibre6">38</a>. Does case-insensitive matching have any effect for the regex <span class="literal">r'\d+'</span>?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-126" type="title" class="h1"><span role="doc-pagebreak" id="calibre_link-2661" aria-label="65" class="calibre1"></span>Substituting Strings</h3>
<p class="noindent">The <span class="literal">sub()</span> method for <span class="literal">Pattern</span> objects accepts two arguments. The first is a string that should replace any matches. The second is the string of the regular expression. The <span class="literal">sub()</span> method returns a string with the substitutions applied. Answer the following questions about the <span class="literal">sub()</span> method.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-739" id="calibre_link-1873" class="calibre6">39</a>. What are <span class="literal">\1</span>, <span class="literal">\2</span>, and <span class="literal">\3</span> in regular expressions?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-740" id="calibre_link-1874" class="calibre6">40</a>. Does the <span class="literal">sub()</span> method return a <span class="literal">Match</span> object?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-741" id="calibre_link-1875" class="calibre6">41</a>. What arguments does the <span class="literal">sub()</span> method take?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-127" type="title" class="h1">Managing Complex Regexes with Verbose Mode</h3>
<p class="noindent">Matching complicated text patterns might require long, convoluted regular expressions. You can mitigate this complexity and enable “verbose mode” by passing the variable <span class="literal">re.VERBOSE</span> as the second argument to <span class="literal">re.compile()</span>. Answer the following questions about verbose mode.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-742" id="calibre_link-1876" class="calibre6">42</a>. What flag do you pass to <span class="literal">re.compile()</span> to enable verbose mode?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-743" id="calibre_link-1877" class="calibre6">43</a>. How does verbose mode make regular expression strings more readable?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-744" id="calibre_link-1878" class="calibre6">44</a>. What do verbose mode comments look like?</p></li>
</ol>
</section>
<section>
<h3 id="calibre_link-128" type="title" class="h1">Humre: A Module for Human-Readable Regexes</h3>
<p class="noindent">The third-party Humre Python module takes the good ideas of verbose mode even further by using human-readable, plain-English names to create readable regex code. Answer the following questions about the Humre module.</p>
<ol class="order">
<li class="calibre15"><p class="number1"><a href="#calibre_link-745" id="calibre_link-1879" class="calibre6">45</a>. What is the return data type of Humre functions?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-746" id="calibre_link-1880" class="calibre6">46</a>. What does the Humre function <span class="literal">exactly(3, 'A')</span> return?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-747" id="calibre_link-1881" class="calibre6">47</a>. What value does the Humre constant <span class="literal">PERIOD</span> have?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-748" id="calibre_link-1882" class="calibre6">48</a>. What do the Humre functions <span class="literal">either(exactly(3, 'A'), exactly(2, 'B'))</span> return?</p></li>
<li class="calibre15"><p class="number1"><a href="#calibre_link-749" id="calibre_link-1883" class="calibre6">49</a>. Name two benefits of Humre over the <span class="literal">re</span> module.</p></li>
</ol>
</section>
</section>
<section>
<h2 id="calibre_link-129" type="title" class="h"><span role="doc-pagebreak" id="calibre_link-2662" aria-label="66" class="calibre1"></span><img class="inline" src="../assets/inventwithpython.com/automate3workbook/images/000002.jpg" alt="A simple drawing of a sharpened pencil." /> Practice Projects</h2>
<p class="noindent">Continue working with regexes as you complete these short projects.</p>
<section>
<h3 id="calibre_link-130" type="title" class="h1">Hashtag-Finding Regex</h3>
<p class="noindent">Create a regex that can find social media hashtags. For the purposes of this project, a “hashtag” pattern begins with a <span class="literal">#</span> character followed by one or more alphanumeric characters (letters, numbers, or underscores). Write a function named <span class="literal">get_hashtags(sentence)</span> that takes a string argument and returns a list of the hashtags. For example, <span class="literal">get_hashtags('Remember to #vote on #electionday.')</span> should return <span class="literal">['#vote', '#electionday']</span>.</p>
<p class="indent">Finish the program by asking the user to enter a sentence and then print the hashtags. For example, the running program could look like this:</p>
<pre class="pre">Enter a sentence:
<span class="codestrong">Remember to #vote on #electionday.</span>
#vote
#electionday</pre>
<p class="indent">Save this function as a program named <i class="calibre5">hashtagRegex.py</i>.</p>
</section>
<section>
<h3 id="calibre_link-131" type="title" class="h1">Price-Finding Regex</h3>
<p class="noindent">Many websites go to great lengths to describe how great their product is without ever telling you the price. I often find myself pressing <span class="smallcaps">ctrl</span>-F to search for “$” to get this information. Let’s write a program that immediately finds prices in text using regular expressions.</p>
<p class="indent">Create a function named <span class="literal">get_price(sentence)</span> that takes a string argument and returns the prices in it. For this project, a price is the dollar sign <span class="literal">'$'</span> followed by one or more digits, optionally followed by a period and two more digits. For example, <span class="literal">get_price('It was $5.99 but is now on sale for $5.95!!')</span> would return <span class="literal">['$5.99', '$5.95']</span>.</p>
<p class="indent">Save this function as a program named <i class="calibre5">priceRegex.py</i>.</p>
</section>
<section>
<h3 id="calibre_link-132" type="title" class="h1">Creating a CSV File of PyCon Speakers</h3>
<p class="noindent">Many countries and regions have conferences on Python, called <i class="calibre5">PyCons</i>. The <i class="calibre5"><a href="https://pyvideo.org" class="calibre6">https://pyvideo.org</a></i> website hosts a collection of recorded talks from various PyCon conferences. Who has given the most PyCon talks? What is the median number of PyCon talks that speakers give? There are several statistics you could gather, but first you need to organize this information into some sort of data structure.</p>
<p class="indent">If you select all of the text from <i class="calibre5"><a href="https://pyvideo.org/speakers.html" class="calibre6">https://pyvideo.org/speakers.html</a></i> and paste it into a text editor, you’ll find a series of speakers followed by the number of talks they’ve given:</p>
<pre class="pre">&nbsp;&nbsp;&nbsp;&nbsp;A Bessas 1
&nbsp;&nbsp;&nbsp;&nbsp;A Bingham 1
&nbsp;&nbsp;&nbsp;&nbsp;A Cuni 3
&nbsp;&nbsp;&nbsp;&nbsp;A Garassino 1
&nbsp;&nbsp;&nbsp;&nbsp;A Jesse Jiryu Davis 13
&nbsp;&nbsp;&nbsp;&nbsp;A Kanterakis 1
<span class="codeitalic">--snip--</span></pre>
<p class="indent"><span role="doc-pagebreak" id="calibre_link-2663" aria-label="67"></span>You can use this example text for the project if, for some reason, you can’t retrieve the web page. Place the text into a single multiline string by enclosing it with triple quotes. Then, call the <span class="literal">splitlines()</span> method and store the returned list of strings in a variable named <span class="literal">speakers</span>:</p>
<pre class="pre">speakers = """&nbsp;&nbsp;&nbsp;&nbsp;A Bessas 1
&nbsp;&nbsp;&nbsp;&nbsp;A Bingham 1
&nbsp;&nbsp;&nbsp;&nbsp;A Cuni 3
<span class="codeitalic">--snip--</span>
&nbsp;&nbsp;&nbsp;&nbsp;Žygimantas Medelis 1""".splitlines()</pre>
<p class="indent">To put this information into a spreadsheet, you could try formatting it as comma-separated values (CSV), discussed in <a href="#calibre_link-26" class="calibre6">Chapter 18</a> of <i class="calibre5">Automate the Boring Stuff with Python</i>.</p>
<p class="indent">To do so, you need to write a regex to pass to the <span class="literal">re.sub()</span> function. Each speaker line consists of four spaces (which we want to remove), followed by the speaker name, then a space (which we want to replace with a comma) and one or more digits at the end of the line. Write the code that changes the string in <span class="literal">speakers</span> to this:</p>
<pre class="pre">A Bessas,1
A Bingham,1
A Cuni,3
A Garassino,1
A Jesse Jiryu Davis,13
A Kanterakis,1
<span class="codeitalic">--snip--</span></pre>
<p class="indent">The speaker names have different widths, and some include non-English characters. To accommodate this, your regex will need to capture the speaker name in a group with <span class="literal">(.*)</span>, then store it in the <span class="literal">\1</span> back reference. The number of talks the speaker has given can be a varying number of digits but always comes at the end of the line. So, you can use the <span class="literal">$</span> regex character to match it.</p>
<p class="indent">Once you’ve put the entire string in CSV format, you can place the text in a text file and save it as <i class="calibre5">speakers.csv</i>. Excel, Google Sheets, and other spreadsheet applications can then structure the speaker name and number of talks into separate columns to make further sorting and processing easier. Note that some of the speaker names have commas in them, which will make some rows in the CSV file contain more than two columns. This is fine for our purposes.</p>
<p class="indent">Save this program in a file named <i class="calibre5">pyconSpeakers.py</i>. When you run the program, the <i class="calibre5">speakers.csv</i> file it creates should have a column of speakers and how many talks they’ve given.</p>
</section>
<section>
<h3 id="calibre_link-133" type="title" class="h1">Laugh Score</h3>
<p class="noindent">We can scientifically measure how funny a joke is based on the length of the text-based laughing response. For example, a joke that elicits the response “Hahaha” is objectively funnier than a joke that gets only a “Haha” response. A joke that provokes a “HAHAaaHAhhAHAHA” response is a very funny joke. (On a personal note, I’ve never understood humor, and no one has ever said I am funny, but that doesn’t matter now that I have software to understand humor for me.)</p>
<p class="indent"><span role="doc-pagebreak" id="calibre_link-2664" aria-label="68"></span>Let’s write a function called <span class="literal">laugh_score(laugh)</span> that uses a regular expression to identify and measure the length of laughing specified by the <span class="literal">laugh</span> string argument. A text-based laugh is defined as beginning with <span class="literal">ha</span>, then consisting of any number of consecutive <span class="literal">h</span> or <span class="literal">a</span> characters. Both lowercase and uppercase characters are acceptable. If there are multiple laughs in a string, count only the first one.</p>
<p class="indent">To write the function, you can complete the following template:</p>
<pre class="pre">import re

def laugh_score(laugh):
&nbsp;&nbsp;&nbsp;&nbsp;# YOUR CODE GOES HERE

assert laugh_score('abcdefg') == 0
assert laugh_score('h') == 0
assert laugh_score('ha') == 2
assert laugh_score('HA') == 2
assert laugh_score('hahaha') == 6
assert laugh_score('ha ha ha') == 2
assert laugh_score('haaaaa') == 6
assert laugh_score('ahaha') == 4
assert laugh_score('Harry said Hahaha') == 2</pre>
<p class="indent">Save this function in a file named <i class="calibre5">laughScore.py</i>.</p>
</section>
<section>
<h3 id="calibre_link-134" type="title" class="h1">Word Twister&mdash;ordW wisterT</h3>
<p class="noindent">Write a program that “twists” the words in a string. For example, calling <span class="literal">twist_words('Hello world! How are you? I am fine.')</span> returns <span class="literal">'oHell dworl! wHo ear uyo? I ma efin.'</span> To do so, the <span class="literal">sub()</span> method for <span class="literal">Pattern</span> objects can move the last letter of every word in a string to the front of the word.</p>
<p class="indent">As arguments, the <span class="literal">sub()</span> method accepts a regex of the pattern to match, a string to replace the matches with, and the string to search for matches. Your regex should use the <span class="literal">\b</span> shorthand character class for word boundaries. For example, the regex <span class="literal">\b[AEIOUaeiou]\w*\b</span> would match every word that begins with an uppercase or lowercase vowel.</p>
<p class="indent">The regex should also use parentheses to put the first letter of each word in one group and the remaining letters in a second group. This way, the second argument can include the <span class="literal">\1</span> and <span class="literal">\2</span> back references to reorder these two groups.</p>
<p class="indent">Your code needs to be only three lines long:</p>
<pre class="pre">import re
pattern = re.compile(r'<span class="codeitalic">THE_REGEX')</span>
print(pattern.sub(r'<span class="codeitalic">REPLACEMENT'</span>, 'Hello world! How are you? I am fine.'))</pre>
<p class="indent">Save this program in a file named <i class="calibre5">wordTwister.py</i>.</p>
</section>
</section>
</section>
</div>






<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"8bd877e77db3400e83e36e899a2ab1fd","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<style>.atbs-nav{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between;margin:1rem 0;padding:.7rem .8rem;border:1px solid #cfd8dc;border-radius:10px;background:#f6fbfd;font:14px/1.35 system-ui,-apple-system,sans-serif;}.atbs-nav-center{color:#455a64;font-weight:600;}.atbs-nav-link{text-decoration:none;color:#0b5b6b;background:#e6f3f7;border:1px solid #c7dfe7;border-radius:7px;padding:.42rem .55rem;display:inline-block;}.atbs-nav-link:hover{background:#d9edf3;}.atbs-nav-disabled{opacity:.55;cursor:not-allowed;}</style><nav class='atbs-nav' aria-label='Chapter pagination'><a class='atbs-nav-link' href='../book/chapter9.html' aria-label='Previous chapter'>&larr; Book Chapter 9</a><span class='atbs-nav-center'><a class='atbs-nav-link' href='../index.html'>Contents</a> Workbook Chapter 9</span><a class='atbs-nav-link' href='../book/chapter10.html' aria-label='Next chapter'>Book Chapter 10 &rarr;</a></nav></body></html>